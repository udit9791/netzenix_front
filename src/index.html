<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Travstock</title>
  <base href="/" />

  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <link href="favicon.ico" rel="icon" type="image/x-icon" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

</head>
<body dir="ltr">
<style>
  #vex-splash-screen {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #111827;
    z-index: 99999;
    pointer-events: none;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 2rem;
  }

  .vex-splash-screen-loader {
    width: 150px;
    height: 22px;
    border-radius: 20px;
    color: #0076b9;
    border: 2px solid;
    position: relative;
  }

  .vex-splash-screen-loader::before {
    content: "";
    position: absolute;
    margin: 2px;
    inset: 0 100% 0 0;
    border-radius: inherit;
    background: currentColor;
    animation: vex-splash-screen-loader-animation 2s forwards;
  }

  @keyframes vex-splash-screen-loader-animation {
    100% {
      inset: 0;
    }
  }
</style>

<div id="vex-splash-screen">
  <img
    height="70"
    width="70"
    loading="eager"
    src="assets/img/logo/logo.svg" />
  <div class="vex-splash-screen-loader"></div>
</div>
<script>
  (function () {
    var splashImg = document.querySelector('#vex-splash-screen img');
    if (!splashImg) return;

    var apiBase = '/deploye/public/api';
    var imgBase = '/deploye/public/';
    var storageKey = 'tenant_logo_url';
    var titleKey = 'tenant_app_name';

    function setLogo(url) {
      if (url) {
        splashImg.src = url;
      }
    }

    try {
      var stored = null;
      try {
        stored = window.localStorage.getItem(storageKey);
      } catch (e) {}

      if (stored) {
        setLogo(stored);
        return;
      }

      fetch(apiBase + '/tenant/app-info', {
        headers: {
          'X-Tenant-Domain': window.location.host
        }
      })
        .then(function (res) {
          if (!res.ok) return null;
          return res.json();
        })
        .then(function (resp) {
          if (!resp || !resp.data || !resp.data.logo) return;
          var data = resp.data || {};
          var logoPath = data.logo ? String(data.logo).replace(/^\/+/, '') : '';
          var url = imgBase + logoPath;
          setLogo(url);
          try {
            window.localStorage.setItem(storageKey, url);
            if (data.app_name) {
              window.localStorage.setItem(titleKey, String(data.app_name));
            }
          } catch (e) {}
        })
        .catch(function () {});
    } catch (e) {}
  })();
</script>
<vex-root></vex-root>
</body>
</html>
